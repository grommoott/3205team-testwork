# –°–æ–∫—Ä–∞—â–∞—Ç–µ–ª—å —Å—Å—ã–ª–æ–∫ ‚Äî Cck üëá

–í –¥–∞–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ 3205.team. Backend –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Nest.js + Typeorm, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL. Frontend ‚Äî –Ω–∞ React + –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ AntD. Backend –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 3000, Frontend ‚Äî –Ω–∞ –ø–æ—Ä—Ç—É 4173, –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ, –Ω–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, —Ç–æ –º–æ–∂–µ—Ç–µ –∏—Ö –∏–∑–º–µ–Ω–∏—Ç—å –≤ `docker-compose.yaml`

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É üöÄ

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è Docker Compose –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

1) –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏(—Ö–æ—Ç—è –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    - –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –Ω–µ —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, —Ç–æ –∏–∑–º–µ–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª–∞—Ö `.env` –∏ `frontend/.env` –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `BACKEND_BASE_URL` –∏ `VITE_BACKEND_BASE_URL` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ –∞–¥—Ä–µ—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ backend'—É(–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –ø—É–±–ª–∏—á–Ω—ã–º –∞–¥—Ä–µ—Å–æ–º `a.b.c.d`, —Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `http://a.b.c.d:3000`), —Ç–∞–∫–∂–µ –µ—Å–ª–∏ –≤—ã –º–µ–Ω—è–ª–∏ –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è backend, —Ç–æ –≤–º–µ—Å—Ç–æ `3000` —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ
2) –ü—Ä–æ–ø–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `docker compose up --build`
3) –ì–æ—Ç–æ–≤–æ! –í—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏ Cck

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API üìñ

### `POST /shorten`
–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —É–∫–æ—Ä–æ—á–µ–Ω–Ω—ã–π url

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```typescript
{
    originalUrl: string // —Å–æ–∫—Ä–∞—â–∞–µ–º—ã–π url
    expiresAt?: Date // –≤—Ä–µ–º—è, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å—Å—ã–∫–∞ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞
    alias?: string // –∫–∞—Å—Ç–æ–º–Ω—ã–π –∞–ª–∏–∞—Å
}
```
–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
```typescript
{
    url: string // —É–∫–æ—Ä–æ—á–µ–Ω–Ω—ã–π url –≤ —Ñ–æ—Ä–º–∞—Ç–µ `http://${BACKEND_BASE_URL}/${shortUrl}`
}
```

–û—à–∏–±–∫–∏:
 - `400: Url with such shortUrl is already exists`

### `GET /:shortUrl`
–ü–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤—ã–≤–∞–µ—Ç –Ω–∞ url, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–æ–∫—Ä–∞—â—ë–Ω, –∏ –ø–æ–ª—É—á–∏–ª `shortUrl` —Ä–∞–≤–Ω—ã–º `:shortUrl`

–û—à–∏–±–∫–∏:
 - `404`: –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–∫–æ—Ä–æ—á–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–∏ —Å `shortUrl` —Ä–∞–≤–Ω—ã–º `:shortUrl`

### `GET /info/:shortUrl`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Å—ã–ª–∫–µ

–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
```typescript
{
    originalUrl: string // —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π url
    createdAt: Date // –¥–∞—Ç–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è url
    clickCount: number // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ
}
```

–û—à–∏–±–∫–∏:
 - `404`: –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–∫–æ—Ä–æ—á–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–∏ —Å `shortUrl` —Ä–∞–≤–Ω—ã–º `:shortUrl` 

### `DELETE /delete/:shortUrl`
–£–¥–∞–ª—è–µ—Ç —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—É—é —Å—Å—ã–ª–∫—É —Å `shortUrl` —Ä–∞–≤–Ω—ã–º `:shortUrl`

–û—à–∏–±–∫–∏:
 - `404`: –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–∫–æ—Ä–æ—á–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–∏ —Å `shortUrl` —Ä–∞–≤–Ω—ã–º `:shortUrl`

### `GET /analytics/:shortUrl`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Å—ã–ª–∫–µ

–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞
```typescript
{
    clickCount: number // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ
    lastIps: string[] // ip, —Å –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω—ã 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
}
```
